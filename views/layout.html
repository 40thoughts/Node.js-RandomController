<!DOCTYPE html>
<html>
  <head>
    <title>{{ appName }}</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    {% include './include/nav.html' %}
    <div class="container main" style="padding-top: 60px">
      <ul class="nav nav-tabs">
        <li{% if page == 'home' or !page %} class="active"{% endif %}><a data-toggle="tab" href="#home">Home</a></li>
        <li{% if page == 'print' %} class="active"{% endif %}><a data-toggle="tab" href="#printer">Printer</a></li>
        <li><a data-toggle="tab" href="#menu3">Menu 3</a></li>
      </ul>

      <div class="tab-content">
        <div id="home" class="tab-pane fade{% if page == 'home' or !page %} in active{% endif %}">
          <h3>Home</h3>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        </div>
        <div id="printer" class="tab-pane fade{% if page == 'print' %} in active{% endif %}">
          <h3>Printer</h3>
          {% include "./print.html" %}
        </div>
        <div id="menu3" class="tab-pane fade{% if page == 'menu3' %} in active{% endif %}">
          <h3>Menu 3</h3>
          <p>Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
        </div>
      </div>

      {% block content %}{% endblock %}

      <div class="row" style="position: absolute; bottom: 10px">
        <div class="container">
          <h3>Chat</h3>
          {% include "./chat.html" %}
        </div>
      </div>

    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    {% block scripts %}{% endblock %}

    <script>
      var socket = io();

      $('#printer').submit(function(){    <!-- Printer -->
        socket.emit('print text', $('#textToPrint').val());
        $('#textToPrint').val('');
        return false;
      });    <!-- Printer End -->
      $('#sendMessage').submit(function(){    <!-- Chat -->
        socket.emit('chat message', $('#m').val());
        $('#m').val('');
        return false;
      });
      socket.on('chat message', function(msg){
        $('#messages').append($('<p>').text(msg));
        element = document.getElementById('messages');
        element.scrollTop = element.scrollHeight;
      });     <!-- Chat End -->
    </script>
  </body>
</html>
